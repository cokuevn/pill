<!doctype html>
<html lang="ru">
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
        <meta name="theme-color" content="#4096FF" />
        <meta name="description" content="–ü—Ä–æ—Å—Ç–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è –æ –ø—Ä–∏–µ–º–µ –ª–µ–∫–∞—Ä—Å—Ç–≤" />
        
        <!-- PWA –º–∞–Ω–∏—Ñ–µ—Å—Ç -->
        <link rel="manifest" href="/manifest.json" />
        
        <!-- iOS Safari meta —Ç–µ–≥–∏ -->
        <meta name="apple-mobile-web-app-capable" content="yes" />
        <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
        <meta name="apple-mobile-web-app-title" content="Pill Reminder" />
        <link rel="apple-touch-icon" href="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTkyIiBoZWlnaHQ9IjE5MiIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSIjNDA5NkZGIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjxwYXRoIGQ9Ik0xOCA5VjdBNCA0IDAgMCAwIDEwIDdWOUE0IDQgMCAwIDAgNiAxM1YxN0E0IDQgMCAwIDAgMTAgMjFIMTRBNCA0IDAgMCAwIDE4IDE3VjEzQTQgNCAwIDAgMCAxOCA5Wk0xMiA5SDE2VjdBNCA0IDAgMCAwIDggN1Y5SDEyWiIvPjwvc3ZnPg==" />
        
        <!-- Microsoft Tiles -->
        <meta name="msapplication-TileColor" content="#4096FF" />
        <meta name="msapplication-TileImage" content="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTkyIiBoZWlnaHQ9IjE5MiIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSIjNDA5NkZGIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjxwYXRoIGQ9Ik0xOCA5VjdBNCA0IDAgMCAwIDEwIDdWOUE0IDQgMCAwIDAgNiAxM1YxN0E0IDQgMCAwIDAgMTAgMjFIMTRBNCA0IDAgMCAwIDE4IDE3VjEzQTQgNCAwIDAgMCAxOCA5Wk0xMiA5SDE2VjdBNCA0IDAgMCAwIDggN1Y5SDEyWiIvPjwvc3ZnPg==" />
        
        <title>Simple Pill Reminder</title>
        
        <!-- Preload –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö —Ä–µ—Å—É—Ä—Å–æ–≤ -->
        <link rel="preload" href="/sw.js" as="script" />
    </head>
    <body>
        <noscript>–î–ª—è —Ä–∞–±–æ—Ç—ã –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –≤–∫–ª—é—á–∏—Ç—å JavaScript.</noscript>
        <div id="root"></div>
        
        <!-- PWA Install Prompt -->
        <script>
            let deferredPrompt;
            let installPromptShown = false;
            
            window.addEventListener('beforeinstallprompt', (e) => {
                e.preventDefault();
                deferredPrompt = e;
                
                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∫–Ω–æ–ø–∫—É —É—Å—Ç–∞–Ω–æ–≤–∫–∏ —á–µ—Ä–µ–∑ 10 —Å–µ–∫—É–Ω–¥
                if (!installPromptShown) {
                    setTimeout(showInstallPrompt, 10000);
                }
            });
            
            function showInstallPrompt() {
                if (deferredPrompt && !installPromptShown) {
                    installPromptShown = true;
                    
                    const prompt = document.createElement('div');
                    prompt.className = 'pwa-install-prompt animate-slide-up';
                    prompt.innerHTML = `
                        <div style="display: flex; align-items: center; gap: 12px;">
                            <div>üì±</div>
                            <div>
                                <div style="font-weight: 600; font-size: 14px;">–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ</div>
                                <div style="font-size: 12px; color: #6b7280;">–î–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞</div>
                            </div>
                            <button onclick="installApp()" style="background: #4096FF; color: white; border: none; padding: 8px 16px; border-radius: 8px; font-size: 12px; font-weight: 600;">–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å</button>
                            <button onclick="hideInstallPrompt()" style="background: none; border: none; color: #6b7280; font-size: 18px; padding: 4px;">√ó</button>
                        </div>
                    `;
                    
                    document.body.appendChild(prompt);
                    
                    // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–∫—Ä—ã—Ç—å —á–µ—Ä–µ–∑ 10 —Å–µ–∫—É–Ω–¥
                    setTimeout(() => {
                        if (prompt.parentNode) {
                            prompt.parentNode.removeChild(prompt);
                        }
                    }, 10000);
                }
            }
            
            window.installApp = async function() {
                if (deferredPrompt) {
                    deferredPrompt.prompt();
                    const { outcome } = await deferredPrompt.userChoice;
                    deferredPrompt = null;
                    hideInstallPrompt();
                }
            }
            
            window.hideInstallPrompt = function() {
                const prompt = document.querySelector('.pwa-install-prompt');
                if (prompt) {
                    prompt.parentNode.removeChild(prompt);
                }
            }
            
            // –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏
            window.addEventListener('appinstalled', () => {
                console.log('PWA —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ');
                deferredPrompt = null;
            });
        </script>
        
        <!-- Analytics placeholder -->
        <script>
            // –ó–¥–µ—Å—å –±—É–¥–µ—Ç Google Analytics –∏–ª–∏ –¥—Ä—É–≥–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞
            console.log('Pill Reminder PWA –∑–∞–ø—É—â–µ–Ω–æ');
        </script>
    </body>
</html>